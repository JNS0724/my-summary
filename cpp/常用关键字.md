# 常用关键字

## static

静态属性

* 普通变量：改变变量的生命周期和存储区域，位于静态数据段。
* 普通函数：声明函数的作用范围限定在类文件里，避免重名。
* 成员变量：声明类里只能保存一个该变量，不需要实例化就能访问。
* 成员函数：不需要实例化就能访问，只能调用static成员。

## const & constexpr

### const表示静态属性

* 修饰变量，表示变量不可变
* const指针有两种，指向指针内容和指针本身

    ```c++
    int x = 10;

    const int* p = &x; //指针内容不能变，也就是x的值
    
    int* const p = &x; //指针不能变，也就是只能指向p
    ```

* const成员函数，表示不能修改成员变量

const和define宏定义常量的区别

| const | define |
| --- | --- |
| 编译器处理 | 预处理器处理|
|类型安全检查| 无类型检查|
|需要分配内存| 不需要分配内存|
|存储在数据段|存储在代码段|
|不可取消|可以用#undef取消|

可以看出const是编译层面上的常量，是一种类型，而define实际上只是宏的应用，是文本的替换。

### constexpr

c++11引入，编译期常量，表示在编译期完成计算。

* 修饰函数，一般是一些计算的函数，调用时在编译期完成计算并替换成常量。
* 修饰变量，只能修饰在编译期就能确定的变量。只能修饰基础类型和指针、引用，但我们可以定义一个类，其构造函数修饰为constexpr，则可以在编译期完成

## this指针

this指针式隐含于每一个非静态成员函数的特殊指针，指向调用该成员函数的对象。this指针隐含在成员函数的参数列表中的首个位置。

this指针隐式声明为ClassName *const this，不能修改this指针的指向。同时this是右值，不能获取this的地址。

## inline

* 内联函数，直接在调用处执行函数体，免去函数跳转和函数栈帧的开销。在类声明中定义的函数，除了虚函数，都隐式地当成内联函数。inline是对编译器的建议，编译器不会内联包含循环、递归、switch等复杂动作。编译器会把函数体复制到调用处，然后为inline函数局部变量分配内存，将inline函数的输入参数和返回值映射到调用处的函数的局部变量空间中，如果inline函数有多个return，转变为inline函数代码块末尾的分支。
* 对比宏，inline有类型检查。
* 虚函数可以是内联函数，但表现多态性时除外。内联是编译期的动作，不能在运行期内联。

## volatile

* 声明为volatile的变量，表示禁止编译器优化，编译器不会把volatile变量当作常量消灭掉，也不会把volatile变量的值缓存在寄存器里。作为一个sequence point，阻止编译器在重排operator的时候跨越这个点。但volatile不能阻止cpu的指令重排序。
* 不能作为多线程同步的手段，多线程同步应该依赖atomic原子操作和锁。
* 要实现多线程共享变量的同步，需要同时实现***指令屏障***、***内存屏障***和***编译器屏障***。[一个知乎回答](https://www.zhihu.com/question/31459750)

## union

union中的一组数据成员，只有一个有值，其他都属于未定义状态，内存空间按最大的数据成员来开辟。
