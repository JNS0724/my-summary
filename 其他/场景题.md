# 场景题

## 数据从网卡到socket的过程

1.数据到达网卡，网卡将数据帧通过DMA的方式，发送到RingBuffer，然后发起硬件中断。
2.CPU处理硬件中断，关闭中断表示将开始处理中断。然后发起软件中断。硬中断在哪个cpu，软中断就发生在哪个cpu。
3.内核进程调用网卡驱动注册的poll函数来从ringbuffer读取数据包，并转为skb格式。然后创建skb描述符，将数据拷贝到sk_buffer这个内核里的队列。
4.进入内核协议栈处理，ip_rcv、udp_rcv或者tcp_rcv。
5.将数据拷贝到用户态。

## 输入URL到页面打开的全过程

1. 浏览器匹配缓存的url，解析hosts文件是否有对应的ip地址。
2. 发起DNS请求，查询ip地址。dns服务器像根域名服务器、一级域名服务器逐级查询。
3. 向80端口建立tcp连接，发送http报文。
4. 经过内核协议栈过滤和封装成帧。发送到对端。
5. 对端解析http协议，封装响应报文，发送对应文件资源。
