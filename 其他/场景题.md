# 场景题

## 数据从网卡到socket的过程

1.数据到达网卡，网卡将数据帧通过DMA的方式，发送到RingBuffer，然后发起硬件中断。
2.CPU处理硬件中断，关闭中断表示将开始处理中断。然后发起软件中断。硬中断在哪个cpu，软中断就发生在哪个cpu。
3.内核进程调用网卡驱动注册的poll函数来从ringbuffer读取数据包，并转为skb格式。然后创建skb描述符，将数据拷贝到sk_buffer这个内核里的队列。
4.进入内核协议栈处理，ip_rcv、udp_rcv或者tcp_rcv。
5.将数据拷贝到用户态。
